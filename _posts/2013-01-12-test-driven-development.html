---
layout: post
title: Test-driven Development
---

<h1>Test-driven Development (TDD)</h1>

<p>I've had some difficulty practicing Test-driven Development (<a href="http://en.wikipedia.org/wiki/Test-driven_development">TDD</a>) while working on my current project. I think it comes from the combination of 1) not knowing exactly what I want my web app to do, 2) not knowing the specific code I need to write to create that look/functionality, and 3) not knowing the correct way to write a test to check it.&nbsp;</p>
<p>I realize that I&nbsp;<em>should</em> be making a plan, then writing a test, then writing code but I usually start with a vague idea of something I want to do then I try to figure out if I can code it. By the time that I figure out what I can code (usually through trial and error), that determines how that feature is represented on the sites. At that point, I have coded the feature and I haven't added any tests! Oops. I really want to be better at writing the test first so I am spending some time this weekend learning more about how to write tests. Instead of adding more features to my project, I want to make sure everything I've added so far already has test coverage.&nbsp;</p>
<p>I knew in general that there were <a href="http://docs.rubygems.org/read/chapter/1#page22">gems</a> that would test for <a href="http://en.wikipedia.org/wiki/Code_coverage">code coverage</a>. <a href="https://twitter.com/alindeman">Andy Lindeman</a>&nbsp;recommended the <a href="https://github.com/colszowka/simplecov">simplecov</a> gem to me. I should mention that just because a line of code is technically covered by a test, you don't have 100% code coverage unless you test all of the possible use cases. At this point, I am just using simplecov to show the major areas where I need to focus my attention.&nbsp;</p>
<p>After installing the gem, I used <a href="http://rspec.info">RSpec</a> to run my tests, I discovered that I already had pretty good overall coverage but my more recently added features needed serious attention, particularly the controllers.&nbsp;</p>
<p>.&nbsp;<img alt="image" src="http://media.tumblr.com/9fed1509fed3a7e6302e0ae0db421b8c/tumblr_inline_mgixu7oP7E1qzerbw.png" /></p>
<p>As I had added new features that required models and controllers to my project new tests were required. I was already pretty comfortable writing tests for models (hence their good coverage) but I hadn't really written any tests for my controllers. Writing all of the tests from scratch for the controllers seemed like a pretty big challenge. Luckily I found a helpful post at <a href="http://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html">Everyday Rails</a>&nbsp;about testing controllers. I appreciate the way that <a href="https://twitter.com/ruralocity">Aaron Sumner</a> lays out the organization of the tests and builds from there. I'm familiar with most of the concepts in the post but writing everything from scratch was difficult.</p>
<p>I also appreciated how he included the type of&nbsp;<a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">request method</a> in the text of the<em> describe</em> block (as shown in the "organization" figure below). I wouldn't have thought to include that bit of information on my own.&nbsp;</p>
<p><img alt="image" src="http://media.tumblr.com/dfb596432d1f2ab4a2be72ad349c3e47/tumblr_inline_mgiyfaZMZ61qzerbw.png" /></p>
<p>This post has helped me to feel more comfortable with writing tests for my controllers. Now I can make sure the features I have already added are covered. I'll also use this information to write <em>new</em> tests for features <em>before</em> adding them in the code.&nbsp;</p>